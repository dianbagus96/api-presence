# api-presence
### SCHEDULE
SELECT A.MAPEL_CLASS_DAY `day`, CONCAT(B.CLASS_NUMBER, B.TYPE) `kelas`, C.MAPEL_DESC `mapel`, 
CONCAT(TIME_FORMAT(A.MAPEL_CLASS_START, '%H:%i'), ' - ', TIME_FORMAT(A.MAPEL_CLASS_END, '%H:%i')) `jam`, D.GURU_ID `nip`, CONCAT(GURU_FIRST_NAME, ' ',GURU_LAST_NAME) `guru`, E.GURU_IMG `pic` FROM tx_class_mapel A
LEFT JOIN tm_class B ON B.CLASS_ID = A.CLASS_ID
LEFT JOIN tm_mapel C ON C.MAPEL_ID = A.MAPEL_ID
LEFT JOIN tx_guru_mapel D ON D.JADWAL_ID = A.JADWAL_ID
LEFT JOIN tm_guru E ON E.GURU_ID = D.GURU_ID

### MY CLASS
SELECT A.SISWA_ID `NIM`, CONCAT(C.SISWA_FIRST_NAME, ' ', C.SISWA_LAST_NAME) `Name`, A.NO_URUT `no_urut` ,CONCAT(B.CLASS_NUMBER, B.TYPE) `kelas` FROM tx_class A
LEFT JOIN tm_class B ON B.CLASS_ID = A.CLASS_ID
LEFT JOIN tm_siswa C ON C.SISWA_ID = A.SISWA_ID

### NEXT SCHEDULE
SELECT A.MAPEL_CLASS_DAY `day`, CONCAT(B.CLASS_NUMBER, B.TYPE) `kelas`, C.MAPEL_DESC `mapel`, 
TIME_FORMAT(A.MAPEL_CLASS_START, '%H:%i')`jam` 
FROM tx_class_mapel A
LEFT JOIN tm_class B ON B.CLASS_ID = A.CLASS_ID
LEFT JOIN tm_mapel C ON C.MAPEL_ID = A.MAPEL_ID
WHERE A.MAPEL_CLASS_DAY = 'Sunday' AND CONCAT(B.CLASS_NUMBER, B.TYPE) = '7A' 
AND ('08:40' BETWEEN A.MAPEL_CLASS_START AND A.MAPEL_CLASS_END)

### SCHOOL SETTING
SELECT TIME_START, TIME_END, PHONE_SCHOOL, PHONE_URGENT FROM tr_setting 

### LOGIN
SELECT A.SISWA_ID `NIM`, CONCAT(C.SISWA_FIRST_NAME, ' ', C.SISWA_LAST_NAME) `Name`, A.NO_URUT `no_urut`, 
CONCAT(B.CLASS_NUMBER, B.TYPE) `kelas` 
FROM tx_class A
LEFT JOIN tm_class B ON B.CLASS_ID = A.CLASS_ID
LEFT JOIN tm_siswa C ON C.SISWA_ID = A.SISWA_ID
WHERE C.SISWA_QRCODE = 'QRWEWEWE11'

### PROFILE
SELECT 
A.SISWA_ID `NIM`, CONCAT(SISWA_FIRST_NAME, ' ', SISWA_LAST_NAME) `name`, 
CASE SISWA_GENDER WHEN 'M' THEN 'Laki - Laki' ELSE 'Perempuan' END `gender` , DATE_FORMAT(SISWA_BORN, '%d %M %Y') `born`, A.SISWA_AGAMA `agama`, C.PROVINCE_DESC `province`, B.CITY_DESC `kota`, A.SISWA_ADDRESS `address`, D.CODE_DESC `status`
FROM tm_siswa A
LEFT JOIN tm_city B ON B.CITY_ID = A.CITY_ID
LEFT JOIN tm_province C ON C.PROVINCE_ID = B.PROVINCE_ID
LEFT JOIN tr_code D ON D.CODE_ID = A.SISWA_STATUS;

### ABSENSI
SELECT A.MAPEL_CLASS_DAY DAY, CONCAT(B.CLASS_NUMBER, B.TYPE) kelas, C.MAPEL_DESC mapel, CONCAT(TIME_FORMAT(A.MAPEL_CLASS_START, '%H:%i'), ' - ', TIME_FORMAT(A.MAPEL_CLASS_END, '%H:%i')) jam , CASE WHEN F.MAPEL_CLASS_ID IS NULL THEN 0 ELSE 1 END `absen`
FROM tx_class_mapel A 
LEFT JOIN tm_class B ON B.CLASS_ID = A.CLASS_ID 
LEFT JOIN tm_mapel C ON C.MAPEL_ID = A.MAPEL_ID 
LEFT JOIN tx_guru_mapel D ON D.JADWAL_ID = A.JADWAL_ID 
LEFT JOIN tm_guru E ON E.GURU_ID = D.GURU_ID
LEFT JOIN 
	(SELECT A.MAPEL_CLASS_ID  FROM tx_absen A
	LEFT JOIN tx_class_mapel B ON B.MAPEL_CLASS_ID = A.MAPEL_CLASS_ID
	WHERE A.SISWA_ID = '41814120056') F 
	ON F.MAPEL_CLASS_ID = A.MAPEL_CLASS_ID
WHERE A.MAPEL_CLASS_DAY = 'Sunday' AND CONCAT(B.CLASS_NUMBER, B.TYPE) = '7A'


### ASPEK
